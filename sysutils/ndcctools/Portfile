# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem              1.0
PortGroup               openssl 1.0

name                    ndcctools
version                 7.7.2
revision                0
checksums               rmd160  6f948c3b6056b939614538b082ee4c35d2c61e75 \
                        sha256  bb4f653584cb0ba628910f03cd6e8c60d82617ed92bbaf7805c8abc9d11713e7 \
                        size    10002712

categories              sysutils
platforms               darwin linux
license                 GPL-2

maintainers             {nd.edu:dthain @dthain} \
                        {nd.edu:btovar @btovar} \
                        openmaintainer

description             distributed computing tools for scientific workflows
long_description        ${name} is a toolkit that provides a variety of workflow \
                        and task execution systems for executing complex scientific \
                        workflows on clusters, clouds, and grids.

homepage                https://cctools.readthedocs.io
master_sites            https://ccl.cse.nd.edu/software/files/
distname                cctools-${version}-source

depends_build-append    port:swig \
                        port:swig-python

depends_lib-append      port:python312 \
                        port:readline \
                        port:curl \
                        port:groff

configure.pre_args      --prefix ${destroot}${prefix} \
                        --with-python3-path ${prefix}/Library/Frameworks/Python.framework/Versions/3.12/bin \
                        --with-openssl-path ${prefix} \
                        --with-readline-path ${prefix} \
                        --with-swig-path ${prefix} \
                        --with-curl-path ${prefix}

# Universal build on osx expects that configure will pick up CFLAGS/CXXFLAGS from the environment.
# The configure script doesn't currently do this and would need some work to put it all together.
universal_variant       no

post-destroot {
    xinstall -d -m 0755 ${destroot}${prefix}/share/doc
    file rename -force ${destroot}${prefix}/doc ${destroot}${prefix}/share/doc/${name}
}


livecheck.regex         cctools-(\[0-9.\]+)-source${extract.suffix}
